# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é - Copy & Paste

> **–ü—Ä–æ—Å—Ç–æ–µ –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ. –ö–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∏ –≤—Å—Ç–∞–≤–ª—è–π—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª.**

**–°–µ—Ä–≤–µ—Ä:** 45.141.78.168  
**–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:** PM2 (–±–µ–∑ Docker)

---

## üìã –®–ê–ì 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@45.141.78.168
```

---

## üìÅ –®–ê–ì 2: –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

```bash
mkdir -p /opt/asian-goods-store
cd /opt/asian-goods-store
```

---

## üì¶ –®–ê–ì 3: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

### –í–∞—Ä–∏–∞–Ω—Ç A: –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub/GitLab

```bash
git clone –í–ê–®_–†–ï–ü–û–ó–ò–¢–û–†–ò–ô .
```

**–ó–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_–†–ï–ü–û–ó–ò–¢–û–†–ò–ô` –Ω–∞ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è!**

### –í–∞—Ä–∏–∞–Ω—Ç B: –ó–∞–≥—Ä—É–∑–∫–∞ —Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞

**–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (Windows PowerShell):**

```powershell
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd "C:\–†–∞–±–æ—Ç–∞\–ü–†–û–ï–ö–¢–´\–ê–∑–∏–∞—Ç—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –º–∞–≥–∞–∑–∏–Ω\asian-goods-store"

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
.\deploy-to-server-pm2.ps1
```

–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç **1 (–ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)** –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.

---

## ‚öôÔ∏è –®–ê–ì 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend .env

```bash
cd /opt/asian-goods-store
nano backend/.env
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ:**

```bash
PORT=3001
FRONTEND_URL=http://45.141.78.168
JWT_SECRET=–ó–ê–ú–ï–ù–ò–¢–ï_–≠–¢–û–¢_–¢–ï–ö–°–¢_–ù–ê_–°–õ–£–ß–ê–ô–ù–£–Æ_–°–¢–†–û–ö–£_–ú–ò–ù–ò–ú–£–ú_32_–°–ò–ú–í–û–õ–ê
NODE_ENV=production

# PostgreSQL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DB_CLIENT=postgres
PGHOST=localhost
PGPORT=5432
PGDATABASE=magazin
PGUSER=postgres
PGPASSWORD=postgres
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ó–∞–º–µ–Ω–∏—Ç–µ `JWT_SECRET` –Ω–∞ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É!

**–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JWT_SECRET:**

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—ã–≤–æ–¥ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–º–µ—Å—Ç–æ `JWT_SECRET=...`

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª:** `Ctrl+O`, `Enter`, `Ctrl+X`

---

### Frontend .env.local

```bash
nano .env.local
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ:**

```bash
NEXT_PUBLIC_API_URL=http://45.141.78.168:3001/api
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** `Ctrl+O`, `Enter`, `Ctrl+X`

---

## üì¶ –®–ê–ì 5: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd /opt/asian-goods-store

# Frontend
npm install

# Backend
cd backend
npm install
cd ..

# –°–±–æ—Ä–∫–∞ frontend
npm run build
```

**‚è≥ –≠—Ç–æ –∑–∞–π–º–µ—Ç 3-5 –º–∏–Ω—É—Ç. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.**

---

## üöÄ –®–ê–ì 6: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å PM2

### –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤

```bash
mkdir -p logs
```

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

```bash
pm2 start ecosystem.config.js
```

### –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
pm2 save
```

### –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

```bash
pm2 startup
```

**PM2 –≤—ã–≤–µ–¥–µ—Ç –∫–æ–º–∞–Ω–¥—É - —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –µ—ë!**

–ó–∞—Ç–µ–º —Å–Ω–æ–≤–∞:

```bash
pm2 save
```

---

## ‚úÖ –®–ê–ì 7: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PM2

```bash
pm2 status
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å 2 –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ `online`:**
- asian-goods-backend
- asian-goods-frontend

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API

```bash
curl http://localhost:3001/api/health
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:** `{"status":"OK",...}`

### –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

- **–°–∞–π—Ç:** http://45.141.78.168:3000
- **API:** http://45.141.78.168:3001/api/health
- **–ê–¥–º–∏–Ω:** http://45.141.78.168:3000/admin

**‚úÖ –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è - –æ—Ç–ª–∏—á–Ω–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º!**

---

## üåê –®–ê–ì 8: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx (—á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–æ –±–µ–∑ :3000)

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
apt update
apt install nginx -y
```

### –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
nano /etc/nginx/sites-available/asian-goods
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –í–°–Å:**

```nginx
server {
    listen 80;
    server_name 45.141.78.168;
    client_max_body_size 20M;

    location /api/ {
        proxy_pass http://localhost:3001/api/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_cache_bypass $http_upgrade;
    }

    location /uploads/ {
        alias /opt/asian-goods-store/backend/uploads/;
        expires 30d;
    }

    location /_next/ {
        proxy_pass http://localhost:3000/_next/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
    }

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** `Ctrl+O`, `Enter`, `Ctrl+X`

### –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
ln -s /etc/nginx/sites-available/asian-goods /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default
nginx -t
systemctl restart nginx
systemctl enable nginx
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://45.141.78.168** (–±–µ–∑ –ø–æ—Ä—Ç–∞!)

**‚úÖ –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–∞–π—Ç**

---

## ü§ñ –®–ê–ì 9: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞

### 9.1 –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ: **@BotFather**
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ: `/newbot`
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`)

### 9.2 –ü–æ–ª—É—á–∏—Ç–µ Chat ID

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ: **@userinfobot**
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à Chat ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789`)

### 9.3 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ: **http://45.141.78.168/admin**
2. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
3. –ù–∞–π–¥–∏—Ç–µ: **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram"**
4. –í—Å—Ç–∞–≤—å—Ç–µ:
   - **Bot Token** - —Ç–æ–∫–µ–Ω –∏–∑ –ø. 9.1
   - **Chat ID** - ID –∏–∑ –ø. 9.2
   - **–í–∫–ª—é—á–∏—Ç—å** - ‚úÖ –≥–∞–ª–æ—á–∫–∞
5. –ù–∞–∂–º–∏—Ç–µ: **"–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"**
6. –ï—Å–ª–∏ –ø—Ä–∏—à–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram - –Ω–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

**‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–∫–∞–∑–µ –≤–∞–º –±—É–¥–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram!**

---

## üî• –ß–ê–°–¢–´–ï –ö–û–ú–ê–ù–î–´ (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ!)

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞

```bash
pm2 status
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
pm2 logs
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
pm2 restart all
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
cd /opt/asian-goods-store
git pull
npm install
cd backend && npm install && cd ..
npm run build
pm2 restart all
```

### Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
cd /opt/asian-goods-store/backend/database
cp store.db backup_$(date +%Y%m%d_%H%M%S).db
ls -lh backup_*.db
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
curl http://localhost:3001/api/health
```

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
pm2 logs asian-goods-backend --lines 50
```

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö.

### Frontend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
pm2 logs asian-goods-frontend --lines 50
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã

```bash
netstat -tlnp | grep -E '3000|3001'
```

### –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
pm2 restart all
pm2 status
```

### –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

```bash
pm2 delete all
cd /opt/asian-goods-store
pm2 start ecosystem.config.js
pm2 save
```

---

## üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw enable
ufw status
```

---

## üì± –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- ‚úÖ **–°–∞–π—Ç:** http://45.141.78.168
- ‚úÖ **–ê–¥–º–∏–Ω–∫–∞:** http://45.141.78.168/admin
- ‚úÖ **API:** http://45.141.78.168/api/health
- ‚úÖ **Telegram:** –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑

---

## üéâ –í–°–Å –ì–û–¢–û–í–û!

–í–∞—à –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã:**

```bash
ssh root@45.141.78.168          # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
cd /opt/asian-goods-store        # –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç
pm2 status                       # –°—Ç–∞—Ç—É—Å
pm2 logs                         # –õ–æ–≥–∏
pm2 restart all                  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `PM2_COMMANDS.md` - –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ PM2 –∫–æ–º–∞–Ω–¥
- `QUICK_TELEGRAM_SETUP.md` - –±—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram
- `DEPLOY_PM2.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

